generator client {
    provider        = "prisma-client-js"
    previewFeatures = ["interactiveTransactions"]
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

enum AccountType {
    STUDENT
    ADMIN
    MERCHANT
}

// Transaction status
enum TXStatus {
    SUCCESS
    PROCESS
    FAILED
    TX_NOT_ENOUGH_MONEY
    TX_ID_WAS_DECLARED
}

enum TXType {
    SEND
    RECEIVE
    WITH_DRAW
    TOPUP_PROMPTPAY
    TOPUP_TRUEMONEY
    TOPUP_LINEPAY
}

enum TXChongWay {
    MB_QRCODE
    // ST_CARD
    // CARD_QRCODE
    // MOBILE_NFC
}

model transaction {
    transaction_id BigInt   @id @default(autoincrement())
    sender_id      String
    receiver_id    String
    type           TXType
    status         TXStatus
    info           String
    amount         Float
    timestamp      DateTime @default(now()) @db.Timestamp(6)
}

model user {
    id           BigInt      @id @default(autoincrement())
    account_type AccountType
    user_id      String      @unique
    name         String
    lastname     String
    email        String
    phone_number String
    password     String
    balance      Float
    expense      Float
    setting      Json        @db.Json
    created      DateTime    @default(now()) @db.Timestamp(6)
    last_update  DateTime    @updatedAt @db.Timestamp(6)
}
